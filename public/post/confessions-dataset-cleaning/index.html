<!DOCTYPE html>
<html lang="en" dir="auto" data-theme="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
<title>My First Task at ByteCitadel: Cleaning 20,000 Confessions | Shubham Apat</title>
<meta name="keywords" content="data-cleaning, nlp, content-moderation, text-processing">
<meta name="description" content="How I cleaned and labeled 20K&#43; text confessions for dip: life beyond colleges app">
<meta name="author" content="">
<link rel="canonical" href="http://localhost:1313/post/confessions-dataset-cleaning/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.b4c2d92c2be113ac5a84dc380901003f2b5cda3766f3a1e3e17c03aa160da3b5.css" integrity="sha256-tMLZLCvhE6xahNw4CQEAPytc2jdm86Hj4XwDqhYNo7U=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="http://localhost:1313/post/confessions-dataset-cleaning/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
                color-scheme: dark;
            }

            .list {
                background: var(--theme);
            }

            .toc {
                background: var(--entry);
            }
        }

        @media (prefers-color-scheme: light) {
            .list::-webkit-scrollbar-thumb {
                border-color: var(--code-bg);
            }
        }

    </style>
</noscript>
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.querySelector("html").dataset.theme = 'dark';
    } else if (localStorage.getItem("pref-theme") === "light") {
       document.querySelector("html").dataset.theme = 'light';
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.querySelector("html").dataset.theme = 'dark';
    } else {
        document.querySelector("html").dataset.theme = 'light';
    }

</script>
</head>
<body id="top">
    <header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Shubham Apat (Alt + H)">Shubham Apat</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/post/" title="Posts">
                    <span>Posts</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/projects/" title="Projects">
                    <span>Projects</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="https://github.com/shubhamapat7" title="GitHub">
                    <span>GitHub</span>&nbsp;
                    <svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round"
                        stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12">
                        <path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"></path>
                        <path d="M15 3h6v6"></path>
                        <path d="M10 14L21 3"></path>
                    </svg>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      My First Task at ByteCitadel: Cleaning 20,000 Confessions
    </h1>
    <div class="post-description">
      How I cleaned and labeled 20K&#43; text confessions for dip: life beyond colleges app
    </div>
    <div class="post-meta"><span title='2024-03-10 00:00:00 +0000 UTC'>March 10, 2024</span>&nbsp;Â·&nbsp;<span>6 min</span>

</div>
  </header> 
<figure class="entry-cover">
        <img loading="eager" src="http://localhost:1313/images/confessions-cleaning.jpg" alt="Text data cleaning and labeling process">
        
</figure>
  <div class="post-content"><h2 id="day-one-at-bytecitadel">Day One at ByteCitadel<a hidden class="anchor" aria-hidden="true" href="#day-one-at-bytecitadel">#</a></h2>
<p>I showed up to my first day at ByteCitadel expecting to work on some fancy deep learning model. Instead, I got assigned to:</p>
<blockquote>
<p><strong>&ldquo;Go clean these 20,000 confessions. We need them for content moderation training.&rdquo;</strong></p>
</blockquote>
<p>This was my first day as a data science intern. I thought I&rsquo;d be doing computer vision or NLP. Instead, I learned the unglamorous truth about machine learning:</p>
<blockquote>
<p><strong>&ldquo;80% of ML is data cleaning. The other 20% is cleaning data.&rdquo;</strong></p>
</blockquote>
<h2 id="the-app-dip-life-beyond-colleges">The App: dip: life beyond colleges<a hidden class="anchor" aria-hidden="true" href="#the-app-dip-life-beyond-colleges">#</a></h2>
<p>dip is a social media platform where college students share <strong>anonymous confessions</strong>. Think <a href="https://en.wikipedia.org/wiki/Yik_Yak">Yik Yak</a> but for Indian colleges.</p>
<p>The problem: students were posting problematic content (harassment, hate speech, personal info), but dip needed automated moderation. That requires <strong>training data</strong>.</p>
<h2 id="the-dataset">The Dataset<a hidden class="anchor" aria-hidden="true" href="#the-dataset">#</a></h2>
<p>20,000+ raw confession entries. Sounds manageable, right?</p>
<p>Not when you see what &ldquo;raw data&rdquo; actually means:</p>
<pre tabindex="0"><code>Raw Confession 1:
&#34;Hey everyone!!! :D :P i want to share something lol...&#34;

Raw Confession 2:
&lt;P&gt; this is html text scraped from some forum &lt;/p&gt;

Raw Confession 3:
ASDFGHJKL PLEASE HELP IM IN NEED OF GUIDANCE about a girl...

Raw Confession 4:
&lt;BODY&gt; MALICIOUS CODE INJECTION ATTEMPT &lt;/BODY&gt;
</code></pre><p>This was a <strong>mess</strong>. I needed to turn this chaos into something useful.</p>
<h2 id="the-cleaning-pipeline">The Cleaning Pipeline<a hidden class="anchor" aria-hidden="true" href="#the-cleaning-pipeline">#</a></h2>
<h3 id="step-1-text-normalization">Step 1: Text Normalization<a hidden class="anchor" aria-hidden="true" href="#step-1-text-normalization">#</a></h3>
<p>First, I removed all the junk:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">clean_confession</span>(text):
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Remove HTML tags</span>
</span></span><span style="display:flex;"><span>    text <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>sub(<span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;&lt;[^&gt;]+&gt;&#39;</span>, <span style="color:#e6db74">&#39;&#39;</span>, text)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Normalize whitespace</span>
</span></span><span style="display:flex;"><span>    text <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>sub(<span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;\s+&#39;</span>, <span style="color:#e6db74">&#39; &#39;</span>, text)<span style="color:#f92672">.</span>strip()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Handle emoji representations</span>
</span></span><span style="display:flex;"><span>    text <span style="color:#f92672">=</span> text<span style="color:#f92672">.</span>replace(<span style="color:#e6db74">&#39; :)&#39;</span>, <span style="color:#e6db74">&#39; ðŸ˜Š&#39;</span>)<span style="color:#f92672">.</span>replace(<span style="color:#e6db74">&#39; :D&#39;</span>, <span style="color:#e6db74">&#39; ðŸ˜ƒ&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Remove extra punctuation</span>
</span></span><span style="display:flex;"><span>    text <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>sub(<span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;[!]{2,}&#39;</span>, <span style="color:#e6db74">&#39;!&#39;</span>, text)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> text<span style="color:#f92672">.</span>lower()
</span></span></code></pre></div><p><strong>Before</strong>: <code>&quot;Hey everyone!!! :D :P i want 2 share something lol...&quot;</code>
<strong>After</strong>: <code>&quot;hey everyone! i want to share something lol&quot;</code></p>
<h3 id="step-2-duplicate-detection">Step 2: Duplicate Detection<a hidden class="anchor" aria-hidden="true" href="#step-2-duplicate-detection">#</a></h3>
<p>Some confessions were posted multiple times:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> fuzzywuzzy <span style="color:#f92672">import</span> fuzz
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">find_duplicates</span>(confessions):
</span></span><span style="display:flex;"><span>    duplicates <span style="color:#f92672">=</span> []
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> i, conf <span style="color:#f92672">in</span> enumerate(confessions):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> j, other_conf <span style="color:#f92672">in</span> enumerate(confessions[i<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>:], i<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>            similarity <span style="color:#f92672">=</span> fuzz<span style="color:#f92672">.</span>ratio(conf[<span style="color:#e6db74">&#39;text&#39;</span>], other_conf[<span style="color:#e6db74">&#39;text&#39;</span>])
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> similarity <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">90</span>:
</span></span><span style="display:flex;"><span>                duplicates<span style="color:#f92672">.</span>append((i, j, similarity))
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> duplicates
</span></span></code></pre></div><p>Found <strong>3.2% duplicates</strong> across 20K confessions. Not bad.</p>
<h3 id="step-3-quality-filtering">Step 3: Quality Filtering<a hidden class="anchor" aria-hidden="true" href="#step-3-quality-filtering">#</a></h3>
<p>Not all confessions were usable:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">meets_quality_criteria</span>(text):
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Minimum length: 20 characters</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> len(text) <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">20</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">False</span>, <span style="color:#e6db74">&#34;Too short&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Maximum length: 5,000 characters</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> len(text) <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">5000</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">False</span>, <span style="color:#e6db74">&#34;Too long&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Check for spam patterns</span>
</span></span><span style="display:flex;"><span>    spam_patterns <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#39;click here&#39;</span>, <span style="color:#e6db74">&#39;visit my channel&#39;</span>, <span style="color:#e6db74">&#39;subscribe&#39;</span>]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> any(pattern <span style="color:#f92672">in</span> text<span style="color:#f92672">.</span>lower() <span style="color:#66d9ef">for</span> pattern <span style="color:#f92672">in</span> spam_patterns):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">False</span>, <span style="color:#e6db74">&#34;Spam detected&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Remove test data</span>
</span></span><span style="display:flex;"><span>    test_patterns <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#39;lorem ipsum&#39;</span>, <span style="color:#e6db74">&#39;test data&#39;</span>, <span style="color:#e6db74">&#39;sample text&#39;</span>]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> any(pattern <span style="color:#f92672">in</span> text<span style="color:#f92672">.</span>lower() <span style="color:#66d9ef">for</span> pattern <span style="color:#f92672">in</span> test_patterns):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">False</span>, <span style="color:#e6db74">&#34;Test data&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">True</span>, <span style="color:#e6db74">&#34;Valid&#34;</span>
</span></span></code></pre></div><p><strong>Results</strong>:</p>
<ul>
<li>5.8% removed (too short)</li>
<li>1.2% removed (spam/test data)</li>
<li><strong>93% retention rate</strong> - Good enough to proceed</li>
</ul>
<h2 id="the-labeling-strategy">The Labeling Strategy<a hidden class="anchor" aria-hidden="true" href="#the-labeling-strategy">#</a></h2>
<p>Now for the fun part: <strong>what category is this confession?</strong></p>
<p>We needed to label each confession for the content moderation model:</p>
<ol>
<li><strong>Safe</strong> (68%) - General sharing, advice, experiences</li>
<li><strong>Needs Review</strong> (18%) - Ambiguous content requiring human review</li>
<li><strong>Inappropriate</strong> (8%) - Violates community guidelines</li>
<li><strong>Personal Info</strong> (4%) - Contains contact details, addresses</li>
<li><strong>Promotional</strong> (2%) - Spam or promotional content</li>
</ol>
<h3 id="automated-first-pass">Automated First Pass<a hidden class="anchor" aria-hidden="true" href="#automated-first-pass">#</a></h3>
<p>I built rules for obvious cases:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">auto_label</span>(confession):
</span></span><span style="display:flex;"><span>    text <span style="color:#f92672">=</span> confession<span style="color:#f92672">.</span>lower()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Personal info patterns</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> re<span style="color:#f92672">.</span>search(<span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;\b\d{10,}\b&#39;</span>, text):  <span style="color:#75715e"># Phone numbers</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;personal_info&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> re<span style="color:#f92672">.</span>search(<span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;\b[\w.-]+@[\w.-]+\.\w+\b&#39;</span>, text):  <span style="color:#75715e"># Email</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;personal_info&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Promotional content</span>
</span></span><span style="display:flex;"><span>    promo_keywords <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#39;follow me&#39;</span>, <span style="color:#e6db74">&#39;check out&#39;</span>, <span style="color:#e6db74">&#39;subscribe&#39;</span>, <span style="color:#e6db74">&#39;buy now&#39;</span>]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> any(keyword <span style="color:#f92672">in</span> text <span style="color:#66d9ef">for</span> keyword <span style="color:#f92672">in</span> promo_keywords):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;promotional&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Spam patterns</span>
</span></span><span style="display:flex;"><span>    spam_keywords <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#39;free money&#39;</span>, <span style="color:#e6db74">&#39;make money fast&#39;</span>, <span style="color:#e6db74">&#39;guaranteed&#39;</span>]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> any(keyword <span style="color:#f92672">in</span> text <span style="color:#66d9ef">for</span> keyword <span style="color:#f92672">in</span> spam_keywords):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;inappropriate&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Otherwise, needs manual review</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;needs_review&#34;</span>
</span></span></code></pre></div><p>This caught about <strong>40% of confessions automatically</strong>.</p>
<h3 id="manual-review">Manual Review<a hidden class="anchor" aria-hidden="true" href="#manual-review">#</a></h3>
<p>For the remaining 60%, I had to read and categorize manually. This took <strong>3 days</strong>.</p>
<blockquote>
<p><strong>&ldquo;Reading 12,000 college confessions will change your perspective on humanity.&rdquo;</strong></p>
</blockquote>
<p>Some confessions were heartbreaking. Others were hilarious. Many were just&hellip; college stuff.</p>
<h2 id="quality-assurance">Quality Assurance<a hidden class="anchor" aria-hidden="true" href="#quality-assurance">#</a></h2>
<h3 id="double-annotation">Double Annotation<a hidden class="anchor" aria-hidden="true" href="#double-annotation">#</a></h3>
<p>I had a colleague label 20% of the data to measure consistency:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># Calculate inter-annotator agreement</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> sklearn.metrics <span style="color:#f92672">import</span> cohen_kappa_score
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>annotator1_labels <span style="color:#f92672">=</span> [<span style="color:#f92672">...</span>]
</span></span><span style="display:flex;"><span>annotator2_labels <span style="color:#f92672">=</span> [<span style="color:#f92672">...</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>kappa_score <span style="color:#f92672">=</span> cohen_kappa_score(annotator1_labels, annotator2_labels)
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;Cohen&#39;s Kappa: </span><span style="color:#e6db74">{</span>kappa_score<span style="color:#e6db74">:</span><span style="color:#e6db74">.3f</span><span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)
</span></span></code></pre></div><p><strong>Result</strong>: 0.87 Kappa score (pretty good for text classification)</p>
<h3 id="error-analysis">Error Analysis<a hidden class="anchor" aria-hidden="true" href="#error-analysis">#</a></h3>
<p>I reviewed mislabeled examples to improve the rules:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># Find common misclassification patterns</span>
</span></span><span style="display:flex;"><span>errors <span style="color:#f92672">=</span> []
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> confession <span style="color:#f92672">in</span> validation_set:
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> confession[<span style="color:#e6db74">&#39;predicted_label&#39;</span>] <span style="color:#f92672">!=</span> confession[<span style="color:#e6db74">&#39;true_label&#39;</span>]:
</span></span><span style="display:flex;"><span>        errors<span style="color:#f92672">.</span>append({
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;text&#39;</span>: confession[<span style="color:#e6db74">&#39;text&#39;</span>],
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;predicted&#39;</span>: confession[<span style="color:#e6db74">&#39;predicted_label&#39;</span>],
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;actual&#39;</span>: confession[<span style="color:#e6db74">&#39;true_label&#39;</span>]
</span></span><span style="display:flex;"><span>        })
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Analyze error patterns</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> error <span style="color:#f92672">in</span> errors[:<span style="color:#ae81ff">10</span>]:
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;Text: </span><span style="color:#e6db74">{</span>error[<span style="color:#e6db74">&#39;text&#39;</span>][:<span style="color:#ae81ff">100</span>]<span style="color:#e6db74">}</span><span style="color:#e6db74">...&#34;</span>)
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;Predicted: </span><span style="color:#e6db74">{</span>error[<span style="color:#e6db74">&#39;predicted&#39;</span>]<span style="color:#e6db74">}</span><span style="color:#e6db74">, Actual: </span><span style="color:#e6db74">{</span>error[<span style="color:#e6db74">&#39;actual&#39;</span>]<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span>    print()
</span></span></code></pre></div><p>This helped me add more nuanced rules for edge cases.</p>
<h2 id="the-final-dataset">The Final Dataset<a hidden class="anchor" aria-hidden="true" href="#the-final-dataset">#</a></h2>
<h3 id="structure">Structure<a hidden class="anchor" aria-hidden="true" href="#structure">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;confession_id&#34;</span>: <span style="color:#e6db74">&#34;conf_001&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;text&#34;</span>: <span style="color:#e6db74">&#34;cleaned confession text&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;label&#34;</span>: <span style="color:#e6db74">&#34;safe/needs_review/inappropriate/...&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;confidence&#34;</span>: <span style="color:#ae81ff">0.95</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;annotator&#34;</span>: <span style="color:#e6db74">&#34;annotator_1&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;timestamp&#34;</span>: <span style="color:#e6db74">&#34;2024-03-10T12:00:00Z&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;word_count&#34;</span>: <span style="color:#ae81ff">45</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="statistics">Statistics<a hidden class="anchor" aria-hidden="true" href="#statistics">#</a></h3>
<table>
  <thead>
      <tr>
          <th>Category</th>
          <th>Count</th>
          <th>Percentage</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><strong>Safe</strong></td>
          <td>13,600</td>
          <td>68%</td>
      </tr>
      <tr>
          <td><strong>Needs Review</strong></td>
          <td>3,600</td>
          <td>18%</td>
      </tr>
      <tr>
          <td><strong>Inappropriate</strong></td>
          <td>1,600</td>
          <td>8%</td>
      </tr>
      <tr>
          <td><strong>Personal Info</strong></td>
          <td>800</td>
          <td>4%</td>
      </tr>
      <tr>
          <td><strong>Promotional</strong></td>
          <td>400</td>
          <td>2%</td>
      </tr>
  </tbody>
</table>
<p>Total: <strong>20,000 clean, labeled confessions</strong></p>
<h2 id="model-training-results">Model Training Results<a hidden class="anchor" aria-hidden="true" href="#model-training-results">#</a></h2>
<p>With this dataset, dip&rsquo;s content moderation model achieved:</p>
<ul>
<li><strong>87% accuracy</strong> on the test set</li>
<li><strong>92% precision</strong> for inappropriate content detection</li>
<li><strong>Reduced manual review by 70%</strong> (only 18% need human review)</li>
</ul>
<p>Not bad for a week&rsquo;s worth of data cleaning!</p>
<h2 id="lessons-learned">Lessons Learned<a hidden class="anchor" aria-hidden="true" href="#lessons-learned">#</a></h2>
<h3 id="1-data-cleaning-is-actually-interesting">1. <strong>Data Cleaning is Actually Interesting</strong><a hidden class="anchor" aria-hidden="true" href="#1-data-cleaning-is-actually-interesting">#</a></h3>
<p>I expected this to be boring. But it&rsquo;s like <strong>archaeology</strong>: you dig through messy data to find patterns and insights.</p>
<h3 id="2-automation--human-judgment--best-results">2. <strong>Automation + Human Judgment = Best Results</strong><a hidden class="anchor" aria-hidden="true" href="#2-automation--human-judgment--best-results">#</a></h3>
<p>The automated rules caught the easy cases. Humans handled the nuanced ones. Together, they created a high-quality dataset.</p>
<h3 id="3-domain-knowledge-helps">3. <strong>Domain Knowledge Helps</strong><a hidden class="anchor" aria-hidden="true" href="#3-domain-knowledge-helps">#</a></h3>
<p>Understanding college student culture helped me:</p>
<ul>
<li>Recognize inside jokes</li>
<li>Identify actual problems vs. dramatic complaints</li>
<li>Spot when students needed help (vs. just complaining)</li>
</ul>
<h3 id="4-documentation-matters">4. <strong>Documentation Matters</strong><a hidden class="anchor" aria-hidden="true" href="#4-documentation-matters">#</a></h3>
<p>I documented every preprocessing step and rule. This helped:</p>
<ul>
<li>New annotators understand the process</li>
<li>Debugging when issues arose</li>
<li>Reproducing the results</li>
</ul>
<h3 id="5-edge-cases-are-everywhere">5. <strong>Edge Cases Are Everywhere</strong><a hidden class="anchor" aria-hidden="true" href="#5-edge-cases-are-everywhere">#</a></h3>
<p>Every time I thought I had a rule covered, a new edge case appeared:</p>
<ul>
<li>Code mixed with confessions</li>
<li>Multiple languages (Hindi + English)</li>
<li>Sarcasm that looked like harassment</li>
<li>Cultural references I didn&rsquo;t understand</li>
</ul>
<h2 id="the-code-pipeline">The Code Pipeline<a hidden class="anchor" aria-hidden="true" href="#the-code-pipeline">#</a></h2>
<p>Here&rsquo;s the complete cleaning pipeline:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">process_confessions</span>(raw_data):
</span></span><span style="display:flex;"><span>    cleaned_data <span style="color:#f92672">=</span> []
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> confession <span style="color:#f92672">in</span> raw_data:
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># Clean text</span>
</span></span><span style="display:flex;"><span>        text <span style="color:#f92672">=</span> clean_confession(confession[<span style="color:#e6db74">&#39;text&#39;</span>])
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># Check quality</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> meets_quality_criteria(text):
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">continue</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># Auto-label</span>
</span></span><span style="display:flex;"><span>        label <span style="color:#f92672">=</span> auto_label(text)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># Store</span>
</span></span><span style="display:flex;"><span>        cleaned_data<span style="color:#f92672">.</span>append({
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;id&#39;</span>: confession[<span style="color:#e6db74">&#39;id&#39;</span>],
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;text&#39;</span>: text,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;label&#39;</span>: label,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;confidence&#39;</span>: calculate_confidence(text, label)
</span></span><span style="display:flex;"><span>        })
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> cleaned_data
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Run the pipeline</span>
</span></span><span style="display:flex;"><span>dataset <span style="color:#f92672">=</span> process_confessions(raw_confessions)
</span></span></code></pre></div><p><strong>78 lines of code</strong> to process 20,000 confessions. Data science isn&rsquo;t always glamorous!</p>
<h2 id="real-world-impact">Real-World Impact<a hidden class="anchor" aria-hidden="true" href="#real-world-impact">#</a></h2>
<p>This dataset became the foundation for dip&rsquo;s content moderation system:</p>
<ul>
<li><strong>Automated filtering</strong> of obvious spam/promotional content</li>
<li><strong>Human review queue</strong> for ambiguous cases</li>
<li><strong>Better user experience</strong> (faster moderation)</li>
<li><strong>Safer community</strong> (reduced harassment)</li>
</ul>
<p>The content moderation system now processes thousands of posts daily, keeping the dip community healthy and safe.</p>
<h2 id="key-takeaways">Key Takeaways<a hidden class="anchor" aria-hidden="true" href="#key-takeaways">#</a></h2>
<ol>
<li><strong>Raw data is messy</strong> - Always expect the unexpected</li>
<li><strong>Start simple</strong> - Basic rules catch most cases</li>
<li><strong>Iterate and improve</strong> - Add complexity as needed</li>
<li><strong>Measure quality</strong> - Track inter-annotator agreement</li>
<li><strong>Document everything</strong> - Future you will thank present you</li>
</ol>
<p>This project taught me that <strong>data quality is the foundation of machine learning</strong>. Without clean, labeled data, even the best model architecture won&rsquo;t work.</p>
<p>Plus, I learned a lot about college student culture. Some of which I wish I could forget! ðŸ˜„</p>
<hr>
<p><em>This was my first project at ByteCitadel, marking the beginning of my journey in content moderation and NLP. If you need help with data cleaning or content moderation, feel free to reach out.</em></p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="http://localhost:1313/tags/data-cleaning/">Data-Cleaning</a></li>
      <li><a href="http://localhost:1313/tags/nlp/">Nlp</a></li>
      <li><a href="http://localhost:1313/tags/content-moderation/">Content-Moderation</a></li>
      <li><a href="http://localhost:1313/tags/text-processing/">Text-Processing</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="http://localhost:1313/projects/bookmyshow-scraper/">
    <span class="title">Â« Prev</span>
    <br>
    <span>BookMyShow Scraper - High-Performance Web Scraping</span>
  </a>
  <a class="next" href="http://localhost:1313/projects/remote-sensing-mangrove-classification/">
    <span class="title">Next Â»</span>
    <br>
    <span>Remote Sensing-Based Mangrove Classification</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="http://localhost:1313/">Shubham Apat</a></span> Â· 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu');
    if (menu) {
        
        const scrollPosition = localStorage.getItem("menu-scroll-position");
        if (scrollPosition) {
            menu.scrollLeft = parseInt(scrollPosition, 10);
        }
        
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        const html = document.querySelector("html");
        if (html.dataset.theme === "dark") {
            html.dataset.theme = 'light';
            localStorage.setItem("pref-theme", 'light');
        } else {
            html.dataset.theme = 'dark';
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
